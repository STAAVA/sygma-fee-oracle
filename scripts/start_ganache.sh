#!/usr/bin/env bash

# Exit on failure
set -e

PORT=8545

# param indicates if running ganache in background
QUIET=$1

# setup ganache
if [ -x "$(command -v ganache-cli)" ]
then
  echo "ganache-cli found, skipping install"
else
  (set -x; npm install -g ganache-cli)
fi

# start ganache
if [ "$QUIET" = true ]; then
    echo "ganache is running on the background..."
    ganache-cli -q -p $PORT -i 5 --account "0x6937d1d0b52f2fa7f4e071c7e64934ad988a8f21c6bf4f323fc19af4c77e3c5e,100000000000000000000" --account "0x0000000000000000000000000000000000000000000000000000000000626f62,100000000000000000000" --account "0x00000000000000000000000000000000000000000000000000636861726c6965,100000000000000000000"  --account "0x0000000000000000000000000000000000000000000000000000000064617665,100000000000000000000" --account "0x0000000000000000000000000000000000000000000000000000000000657665,100000000000000000000" &
    sleep 5
else
    echo "ganache is running..."
    ganache-cli -p $PORT -i 5 --account "0x6937d1d0b52f2fa7f4e071c7e64934ad988a8f21c6bf4f323fc19af4c77e3c5e,100000000000000000000" --account "0x0000000000000000000000000000000000000000000000000000000000626f62,100000000000000000000" --account "0x00000000000000000000000000000000000000000000000000636861726c6965,100000000000000000000"  --account "0x0000000000000000000000000000000000000000000000000000000064617665,100000000000000000000" --account "0x0000000000000000000000000000000000000000000000000000000000657665,100000000000000000000"
fi
